FROM node:5
MAINTAINER Octoblu, Inc. <docker@octoblu.com>

ENV NODE_TLS_REJECT_UNAUTHORIZED 0
ADD .npmrc /root/.npmrc
ADD .npmrc-dev /root/.npmrc-dev
RUN cat /root/.npmrc-dev >>/root/.npmrc

WORKDIR /usr/src/app

ADD package.json /usr/src/app/
RUN ["npm", "install", "--production"]

ADD . /usr/src/app

CMD ["node", "--max-old-space-size=150", "command.js"]
