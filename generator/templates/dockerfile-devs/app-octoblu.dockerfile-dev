FROM node:5
MAINTAINER Octoblu, Inc. <docker@octoblu.com>

ENV NODE_TLS_REJECT_UNAUTHORIZED 0
ADD .npmrc-dev /root/.npmrc

EXPOSE 80

WORKDIR /usr/src/app/bower/lib
WORKDIR /usr/src/app/bower_components
WORKDIR /usr/src/app

ENV PATH $PATH:/usr/local/bin

ADD package.json /usr/src/app/
RUN ["npm", "install", "--production"]

ADD gulpfile.js /usr/src/app
ADD bower.json /usr/src/app
RUN ["node_modules/gulp/bin/gulp.js", "bower:concat"]

ADD . /usr/src/app
CMD ["./.growl-run-dev", "node_modules/gulp/bin/gulp.js", "watch"]
