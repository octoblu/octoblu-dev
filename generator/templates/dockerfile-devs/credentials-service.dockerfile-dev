FROM node:5
MAINTAINER Octoblu, Inc. <docker@octoblu.com>

ENV NODE_TLS_REJECT_UNAUTHORIZED 0
ADD .npmrc-dev /root/.npmrc

EXPOSE 80

WORKDIR /usr/src/app

COPY package.json /usr/src/app/
RUN ["npm", "install", "--production", "--silent"]
COPY . /usr/src/app/

ADD http://meshblu.octoblu.dev/publickey /usr/src/app/public-key.json

CMD [ "node", "command.js" ]
